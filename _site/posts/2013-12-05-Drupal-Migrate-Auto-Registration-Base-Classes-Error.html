<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Dave Parrish - Drupal Migrate error due to auto registration and base classes</title>

        <!-- Stylesheets. -->
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/syntax.css" />

        <!-- Metadata. -->
        <meta name="keywords" content="daveparrish,drupal,haskell,liberty,bitcoin,linux,blog,hakyll" />
        <meta name="description" content="Dave Parrish - Hakyll blog" />
    </head>
    <body>
        <div id="main">
            <div id="header">
                <a href="../">
                    <img src="../images/lambda.png" alt="lambda" />
                    Dave Parrish's Blog
                </a>
            </div>
            <!-- Sidebar. -->
            <div id="sidebar">
                <a href="../index.html">Home</a>
                <a href="../about.html">About</a>
                <a href="../contact.html">Contact</a>
                <a href="../archive.html">Archive</a>

            </div>

            <div id="content">
		<h1>Drupal Migrate error due to auto registration and base classes</h1>
                <div class="info">Posted on December  5, 2013 - 11:20:00 AM</div>

<p>If you are getting an error similar to the following when using the <code>drush ms</code> command:</p>
<pre><code>[vagrant@localhost drupal]$ drush ms
PHP Fatal error:  Call to a member function importedCount() on a non-object in /vagrant/drupal/profiles/commerce_kickstart/modules/contrib/migrate/includes/migration.inc on line 847
Drush command terminated abnormally due to an unrecoverable error.                  [error]
Error: Call to a member function importedCount() on a non-object in
/vagrant/drupal/profiles/commerce_kickstart/modules/contrib/migrate/includes/migration.inc,
line 847</code></pre>
<p>Then you may have accidently had a base migration class registered when you ran <code>drush mar</code>.</p>
<p>To recover from this, you need to deregister the base classes in your project. In my case the fix was the following:</p>
<pre><code>$ drush migrate-deregister ItemCommon
$ drush migrate-deregister OrderCommon</code></pre>

            </div>

            <div id="footer">
                Site proudly generated by <a href="http://github.com/jaspervdj/hakyll">hakyll</a>.
            </div>
        </div>
    </body>
</html>
